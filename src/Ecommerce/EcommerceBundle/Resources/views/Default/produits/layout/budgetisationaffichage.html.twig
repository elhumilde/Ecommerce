<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% block titre %}E-contact | Budgétisation - Affichage {% endblock %}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="icon" type="image/x-icon" href="{{ asset('Logo-econtact-2.png') }}" />
    <link rel="stylesheet" href="{{ asset('css/style-budgetisation-affichage.css') }}" />
</head>
<body>
<div class="icon-retour">
    <a style="color: #2eb2ff;" href="{{ path('fos_user_profile_show') }}">< Retour  ( chemins des onglets parcourus )</a>
</div>

<section  id="fond-1" align=center>

    <div class="container">

        <div class="row">

            <div class="col-md-12 col-sm-12 col-xs-12" align=center>
                <div class="titre-1">
                    <p>Budgétisation</p>
                </div>
                <div class="titre-2">
                    <p class="acroche"><span style="color: #ffdb2e"><strong>Communiquez efficacement</strong></span> auprès d'une cible qualifiée avec
                        <br>
                        des espaces publicitaires dynamique
                    </p>
                </div>
            </div>

        </div>

    </div>

</section>
<section  id="fond-2">

    <div class="container">

        <div class="row">

            <div class="col-md-12 col-sm-12 col-xs-12">

                <div class="btn-1">
                    <img class="icone" src="https://image.noelshack.com/fichiers/2018/08/5/1519379743-icona-2.png">
                    Affichage
                </div>

                <div class="produits">

                    <form class="form-inline">

                        <div>

                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-1">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;Vignette thématique &nbsp;   <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>

                            <div id="demo-1" class="collapse">
                                <div class="form-inline villes" >
                                    <button type="button" class="btn" data-toggle="collapse" data-target="#demo-1-1">
                                        Ville de départ &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                    </button>
                                    <div id="demo-1-1" class="collapse bouton-2" style="overflow-y:scroll;">
                                        <div class="form-inline" >
                                            {% for ville in villes %}
                                                <label class="checkbox-inline">
                                                    <input id="select" class="checkbox_villes vignette_thematique_ville" type="checkbox" name="villes" value="{{ ville.region.coderegion }}"/>&nbsp; &nbsp;{{ ville.libelle }}
                                                </label>
                                            {% endfor %}

                                        </div>

                                    </div>

                                <div class="form-inline region">
                                    <label class="checkbox-inline">
                                        <input class="checkbox_region vignette_thematique" type="checkbox" value="L">Ma ville
                                    </label>
                                    <label class="checkbox-inline">
                                        <input class="checkbox_region vignette_thematique " type="checkbox" value="0">Sa région
                                    </label>
                                    <label class="checkbox-inline">
                                        <input class="checkbox_region vignette_thematique" type="checkbox" value="1">+1 région
                                    </label>
                                    <label class="checkbox-inline">
                                        <input class="checkbox_region vignette_thematique" type="checkbox" value="3">+3 régions
                                    </label>
                                    <label  class="checkbox-inline">
                                        <input class="checkbox_region vignette_thematique" type="checkbox" value="6">+6 régions
                                    </label>
                                    <label class="checkbox-inline">
                                        <input class="checkbox_region vignette_thematique" type="checkbox" value="9">+9 régions
                                    </label>
                                    <label class="checkbox-inline" style="display: none" >
                                        <input type="text" id="thematique" value="0" readonly  >
                                    </label>
                                </div>

                            </div>
                        </div>



                        <div>
                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-2">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;Vignette localité <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>

                            <div id="demo-2" class="collapse">

                               {# total#}
                                    <input type="text" id="localite" value="0" readonly style="display: none">
                                    <input  type="text" id="localite1" style="display: none" >

                                <div class="form-inline villes ">
                                    <button type="button" class="btn" data-toggle="collapse" data-target="#demo-2-1">
                                        Catégorie 1 &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                    </button>
                                    <div id="demo-2-1" class="collapse bouton-2" style="overflow-y:scroll;">
                                        <div class="form-inline" >
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="24000">Casablanca
                                            </label>

                                        </div>
                                    </div>
                                </div>

                                <div class="form-inline villes categorie-1" >
                                    <button type="button" class="btn" data-toggle="collapse" data-target="#demo-2-2">
                                        Catégorie 2 &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                    </button>
                                    <div id="demo-2-2" class="collapse bouton-2" style="overflow-y:scroll;">
                                        <div class="form-inline" >
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="12000">&nbsp; &nbsp;Rabat
                                            </label>
                                            <label  class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="12000">&nbsp; &nbsp;Fés
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="12000">&nbsp; &nbsp;Marrakech
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="12000">&nbsp; &nbsp;Meknès
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="12000">&nbsp; &nbsp;Agadir
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-inline villes categorie-2" >
                                    <button type="button" class="btn" data-toggle="collapse" data-target="#demo-2-3">
                                        Catégorie 3 &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                    </button>
                                    <div id="demo-2-3" class="collapse bouton-2" style="overflow-y:scroll;">
                                        <div class="form-inline" >
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="8000">&nbsp; &nbsp;Kénitra
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="8000">&nbsp; &nbsp;Oujda
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="8000">&nbsp; &nbsp;Essaouira
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="8000">&nbsp; &nbsp;Safi
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="8000">&nbsp; &nbsp;Settat
                                            </label>
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="8000">&nbsp; &nbsp;Tétouan
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-inline villes categorie-3" >
                                    <button type="button" class="btn" data-toggle="collapse" data-target="#demo-2-4">
                                        Catégorie 4 &nbsp;   <span class="glyphicon glyphicon-triangle-bottom"></span>
                                    </button>
                                    <div id="demo-2-4" class="collapse bouton-2" style="overflow-y:scroll;">
                                        <div class="form-inline" >
                                            <label class="checkbox-inline">
                                                <input class="vignette_localite" type="checkbox" value="5000" >&nbsp; &nbsp;Toutes les autres villes y compris les alentours des grandes villes.
                                                <br>Ex: Bouskoura
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div>
                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-3">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;Professionnels du jour &nbsp;   <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>
                            <div id="demo-3" class="collapse">
                                <label class="checkbox-inline">
                                    <input class=" checkbox_prof professionnels_du_jour" type="checkbox" value="1"/>1 Mois
                                </label>
                                <label class="checkbox-inline">
                                    <input class=" checkbox_prof professionnels_du_jour" type="checkbox" value="3">3 Mois
                                </label><br>
                                <label class="checkbox-inline" style="display: none">
                                    <input type="text" id="pfjour" value="0" readonly  >
                                </label>
                            </div>
                        </div>


                        <div>
                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-4">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;Espace Promo &nbsp;   <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>
                            <div id="demo-4" class="collapse">
                                <label class="checkbox-inline">
                                    <input class="checkbox_promo espace_promo" type="checkbox" value="1"/>1 Promo / An
                                </label>
                                <label class="checkbox-inline">
                                    <input class="checkbox_promo espace_promo" type="checkbox" value="2">3 Promos / An
                                </label>
                                <label class="checkbox-inline">
                                    <input class="checkbox_promo espace_promo" type="checkbox" value="3">6 Promos / An
                                </label>
                                <label class="checkbox-inline">
                                    <input class="checkbox_promo espace_promo" type="checkbox" value="4">12 Promos / An
                                </label><br>
                                <label class="checkbox-inline" style="display: none" >
                                    <input type="text" id="promo" value="0" readonly >
                                </label>
                            </div>
                        </div>




                        <div>
                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-5">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;Vignettes  &nbsp;   <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>
                            <div id="demo-5" class="collapse">
                                <label for="Nombre d'affichage" i="nombre-afichage">Nombre d'affichage &nbsp; &nbsp;
                                    <input  class="vignette_acc_video" type="text" name="nbr1" id="nbr1"  value=""/>
                                </label><br>
                                <label class="checkbox-inline">
                                    <input class="checkbox_vignette_acc_video vignette_acc_video" type="checkbox" value="V0">Accueil
                                </label>
                                <label class="checkbox-inline">
                                    <input class="checkbox_vignette_acc_video vignette_acc_video"  type="checkbox" value="VV">Vidéo
                                </label><br>
                                <label class="checkbox-inline" style="display: none">
                                    <input type="text" id="vignette" name="vignette" value="0" readonly  >
                                    <input type="text" id="total1" name="total" value="0" readonly style="display: none" >
                                </label>
                            </div>
                        </div>




                        <div>
                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-6">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;Habillage &nbsp;   <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>
                            <div id="demo-6" class="collapse">
                                <label class="checkbox-inline">
                                    <input class="checkbox_habillage habillage" type="checkbox" value="1"/>Jour
                                </label>
                                <label class="checkbox-inline">
                                    <input class="checkbox_habillage habillage" type="checkbox" value="2">Semaine
                                </label><br>
                                <label class="checkbox-inline" style="display: none">
                                    <input type="text" id="habillage" value="0" readonly  >
                                </label>
                            </div>
                        </div>





                        <div>
                            <button type="button" class="btn btn-2" data-toggle="collapse" data-target="#demo-7">
                                <span class="glyphicon glyphicon-zoom-in"></span>&nbsp; &nbsp;EBannières  &nbsp;   <span class="glyphicon glyphicon-triangle-right"></span>
                            </button>
                            <div id="demo-7" class="collapse">
                                <label for="Nombre d'affichage" i="nombre-afichage">Nombre d'affichage &nbsp; &nbsp;
                                    <input  class="banniere" type="text" name="nombre" id="nombre"  value=""/>
                                </label>
                                <label class="checkbox-inline">
                                    <input class="banniere" type="checkbox" value="80">En haut sur la page de résultats
                                </label>
                                <label class="checkbox-inline">
                                    <input class="banniere" type="checkbox" value="90">En bas sur la page de résultats
                                </label>
                                <label class="checkbox-inline">
                                    <input class="banniere" type="checkbox" value="150">En haut sur les fiches prospects
                                </label>
                                <label class="checkbox-inline">
                                    <input class="banniere" type="checkbox" value="150">En bas sur les fiches prospects
                                </label><br>
                                <label class="checkbox-inline" style="display: none">
                                    <input type="text"  id="banniere" name="banniere" value="0" readonly  >
                                </label>
                            </div>
                        </div>


                        </div>

                    </form>

                </div>

            </div>

        </div>

    </div>

</section>
<section  id="fond-4">

    <div class="container">

        <div class="row">

            <div class="col-md-12 col-sm-12 col-xs-12" >
                <div class="form-group pull-left">
                    <div class="form-group">
                        <button id="button" class="btn black" onclick="showhide_r() ">
                            <span style="color: #ffdb2e;">Budget estimé</span>
                            <br>Référencement
                        </button>
                        <div id="ref" style="display: none">
                            <input type="text" name="total" id="totalref" value="0"  readonly/>
                        </div>
                    </div>
                </div>
                <div class="form-group pull-left">
                    <div class="form-group">
                        <button id="button" class="btn black" onclick="showhide_c()">
                            <span style="color: #ffdb2e;">Budget estimé</span>
                            <br>Gestion de contenu
                        </button>
                        <div id="cat" style="display: none">
                            <input type="text" name="total" id="totalcat" value="0"  readonly/>
                        </div>
                    </div>
                </div>
                <div class="form-group pull-left">
                    <div class="form-group">
                        <button id="button" class="btn black" onclick="showhide_a()">
                            <span style="color: #ffdb2e;">Budget estimé</span>
                            <br>Affichage
                        </button>
                        <div id="aff" style="display: none">
                            <input type="text" name="total" id="totalaff" value="0"  readonly/>
                        </div>
                    </div>
                </div>
                    <div class="form-group pull-right">
                        <div class="form-inline">
                            <div class="form-group">
                                <button id="button" class="btn black" onclick="showhide_global()">
                                    <span style="color: #ffdb2e;">Budget Global <br >estimé </span>

                                </button>
                                <div id="global" style="display: none">
                                    <input type="text" name="total" id="totalglobal" value="0"  readonly/>
                                </div>
                            </div>
                        </div>
                    </div>





                </div>
            </div>
        </div>

    </div>

</section>
</body>
</html>




{% if is_granted('IS_AUTHENTICATED_FULLY') %}
{% include 'UtilisateursBundle:Default:modulesUsed/utilisateursConnecte.html.twig' %}
{% else %}
{% include 'UtilisateursBundle:Default:modulesUsed/utilisateurs.html.twig' %}
{% endif %}
{% render(controller('EcommerceBundle:Panier:menu')) %}


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery.js"></script>

<script>
               /*single-checkbox*/
    $('.checkbox_villes').on('change', function() {
        $('.checkbox_villes').not(this).prop('checked', false);
    });

    $('.checkbox_region').on('change', function() {
        $('.checkbox_region').not(this).prop('checked', false);
    });
    $('.checkbox_prof').on('change', function() {
        $('.checkbox_prof').not(this).prop('checked', false);
    });
    $('.checkbox_promo').on('change', function() {
        $('.checkbox_promo').not(this).prop('checked', false);
    });
    $('.checkbox_vignette_acc_video').on('change', function() {
        $('.checkbox_vignette_acc_video').not(this).prop('checked', false);
    });
    $('.checkbox_habillage').on('change', function() {
        $('.checkbox_habillage').not(this).prop('checked', false);
    });

        /*----------------------------------*/
               function showhide_r()
               {
                   var div = document.getElementById("ref");
                   if (div.style.display == "none") {
                       div.style.display = "block";
                   }
                   else {
                       div.style.display = "none";
                   }
               }

               function showhide_c()
               {
                   var div = document.getElementById("cat");
                   if (div.style.display == "none") {
                       div.style.display = "block";
                   }
                   else {
                       div.style.display = "none";
                   }
               }
               function showhide_a()
               {
                   var div = document.getElementById("aff");
                   if (div.style.display == "none") {
                       div.style.display = "block";
                   }
                   else {
                       div.style.display = "none";
                   }
               }
               function showhide_global()
               {
                   var div = document.getElementById("global");
                   if (div.style.display == "none") {
                       div.style.display = "block";
                   }
                   else {
                       div.style.display = "none";
                   }
               }
        /*----------------------------------*/

    var selectfct = function () {
        if($(".vignette_thematique_ville").is(":checked")){
            $('.vignette_thematique').prop('disabled', false);
        }else{
            $('.vignette_thematique').prop('disabled', 'disabled');
        }
    };
    $(selectfct);
    $(".vignette_thematique_ville").click(selectfct);
</script>
<script type="text/javascript">
    $(document).ready(function() {
        cal();

        function cal(){
            var totalaff=0;
            var thematique = +$("#thematique").val() || 0;
            var localite = +$("#localite").val() || 0;
            var pfjour = +$("#pfjour").val() || 0;
            var promo = +$("#promo").val() || 0;
            var vignette = +$("#total1").val() || 0;
            var habillage = +$("#habillage").val() || 0;
            var banniere = +$("#banniere").val() || 0;
            totalaff=thematique + localite+pfjour+promo+vignette+habillage+banniere;
            $("#totalaff").val(totalaff);
            cal2();
        }

        function cal2() {
            var totalref = +$("#totalref").val() || 0;
            var totalcat = +$("#totalcat").val() || 0;
            var totalaff = +$("#totalaff").val() || 0;
            $("#totalglobal").val(totalref + totalcat+totalaff);
        }

        $(document).on('change', '.vignette_thematique', function (){
            var ctar  = 'VA';
            console.log("CHANGE rubrique AND prestation....................");
            var select = jQuery(this);
            var v = $('input[name=villes]:checked').val();
            var o = $(this).attr("value");
            var region = $(this).attr("value");
            console.log('ville : ', v, 'opt1 :',o);
            //     console.log('rubrique : ', r);
            var data_send = { 'ville': v,'opt1':o,'region':v,'ctar':ctar};
            var $input = $( this );
            if ( $input.is( ":checked" ) )
            {
                $.ajax({
                    url: '{{ path('ajax_va') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.VAR;
                            $('input[id=thematique]').val(successMessage);
                            cal();
                            var successMessageL = response.nom.L;
                            var successMessageLO1 = response.nom.LO1;
                            var successMessageLO2 = response.nom.LO2;
                            console.log('libelle ::', successMessageL);
                            console.log('libelle OPT1 ::', successMessageLO1);
                            console.log('libelle OPT2 ::', successMessageLO2);

                            /*  $('#prestation').children("option").remove();*/
                        },
                        //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                        }
                    }
                });
            }
            else
            {
                $('input[id=thematique]').val(0);
                cal();
            }
            //   $( "#select-rubrique" ).clone().appendTo("#test");
        });



        //vignette Localité
        /*$(document).on('click', '.vignette_localite', function ()
         {
         var ctar = 'VL';
         console.log("CHANGE rubrique AND prestation....................");
         var opt1 = $(this).attr("value");
         console.log('ctar : ', ctar, 'opt1 :', opt1);
         var data_send = {'ctar': ctar,'opt1':opt1};
         var $input = $( this );
         if ( $input.is( ":checked" ) )
         {
         $.ajax({
         url:'{{ path('ajax_t') }}',
         type: 'POST',
         data: data_send,
         statusCode: {
         //traitement en cas de succès
         200: function (response) {
         var successMessage = response.nom.VL;
         var t1= $('input[id=localite]').val(successMessage);
         console.log('localite ::' ,($('input[id=localite]').val(successMessage)).val());
         cal2();
         var t= $('input[id=localite1]').val();
         console.log('localite1 ::',t);
         cal();
         },
         412: function (response) {
         var errorsForm = response.responseJSON.formErrors;
         //on affiche les erreurs...
         alert('error');
         }
         }
         });}
         else
         {
         var bn = $("#localite").val();
         var bf = $("#localite1").val();
         var n= (bf-bn);
         $('input[id=localite]').val(0);
         $('input[id=localite1]').val(n);
         cal2();
         cal();
         }
         });
         */


        //vignette Localité

        /*$(document).on('click', '.vignette_localite', function ()
         {
         var ctar = 'VL';
         console.log("CHANGE rubrique AND prestation....................");
         var opt1 = $(this).attr("value");
         console.log('ctar : ', ctar, 'opt1 :', opt1);
         var data_send = {'ctar': ctar,'opt1':opt1};

         var $input = $( this );
         if ( $input.is( ":checked" ) )

         {
         $.ajax({
         url:'{{ path('ajax_t') }}',
         type: 'POST',
         data: data_send,
         statusCode: {
         //traitement en cas de succès
         200: function (response) {
         var successMessage = response.nom.VL;

         var t1= $('input[id=localite]').val(successMessage);
         console.log('localite ::' ,($('input[id=localite]').val(successMessage)).val());
         cal2();
         var t= $('input[id=localite1]').val();
         console.log('localite1 ::',t);
         cal();
         },
         412: function (response) {
         var errorsForm = response.responseJSON.formErrors;
         //on affiche les erreurs...
         alert('error');
         }
         }
         });}
         else
         {
         var bn = $("#localite").val();
         var bf = $("#localite1").val();
         var n= (bf-bn);

         $('input[id=localite]').val(0);
         $('input[id=localite1]').val(n);
         cal2();
         cal();


         }

         });
         */


        //solution 2
        $(".vignette_localite").click(function(event) {
            var total = 0;
            $(".vignette_localite:checked").each(function() {
                total += (parseInt($(this).val()));
            });
            if (total == 0) {
                $('#localite').val(0);
                cal();
            } else
            if( $(".vignette_localite:checked").length ==1)
            {
                $('#localite').val(total);
                cal();
            }
            else
            if( $(".vignette_localite:checked").length ==2)
            {
                $('#localite').val((total-(total*0.1)));
                cal();
            }
            else
            if( $(".vignette_localite:checked").length ==3)
            {
                $('#localite').val((total-(total*0.15)));
                cal();
            }
            else
            if( $(".vignette_localite:checked").length ==4)
            {
                $('#localite').val((total-(total*0.2)));
                cal();
            }
            else
            {
                $('#localite').val((total-(total*0.25)));
                cal();
            }
            /* {
             $('#localite').val((total));
             cal();
             }*/
        });
        //professionnels du jour
        $(document).on('change', '.professionnels_du_jour', function (){
            var ctar = 'PJ';
            console.log("CHANGE rubrique AND prestation....................");
            var opt1 = $(this).attr("value");
            console.log('ctar : ', ctar, 'opt1 :', opt1);
            var data_send = {'ctar': ctar,'opt1':opt1};
            var $input = $( this );
            if ( $input.is( ":checked" ) )
            {
                $.ajax({
                    url: '{{ path('ajax_t') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.T;
                            $('input[id=pfjour]').val(successMessage);
                            cal();
                            var successMessage  = response.nom.T;
                            var successMessageL = response.nom.L;
                            var successMessageLO = response.nom.LO;
                            console.log('libelle ::', successMessageL);
                            console.log('libelle OPT1 ::', successMessageLO);

                            /*  $('#prestation').children("option").remove();*/
                        },
                        //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                        }
                    }
                });
            }
            else
            {
                $('input[id=pfjour]').val(0);
                cal();
            }
            //   $( "#select-rubrique" ).clone().appendTo("#test");
        });
        //espace promo
        $(document).on('change', '.espace_promo', function () {
            var ctar = 'EP';
            console.log("CHANGE rubrique AND prestation....................");
            var opt1 = $(this).attr("value");
            console.log('ctar : ', ctar, 'opt1 :', opt1);
            var data_send = {'ctar': ctar,'opt1':opt1};
            var $input = $( this );
            if ( $input.is( ":checked" ) )
            {
                $.ajax({
                    url:'{{ path('ajax_t') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.T;
                            $('input[id=promo]').val(successMessage);
                            cal();
                            var successMessage  = response.nom.T;
                            var successMessageL = response.nom.L;
                            var successMessageLO = response.nom.LO;
                            console.log('libelle ::', successMessageL);
                            console.log('libelle OPT1 ::', successMessageLO);

                        },
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                        }
                    }
                });}else
            {
                $('input[id=promo]').val(0);
                cal();
            }
        });
        //habillage
        $(document).on('change', '.habillage', function (){
            var ctar = 'HB';
            console.log("CHANGE rubrique AND prestation....................");
            var opt1 = $(this).attr("value");
            console.log('ctar : ', ctar, 'opt1 :', opt1);
            var data_send = {'ctar': ctar,'opt1':opt1};
            var $input = $( this );
            if ( $input.is( ":checked" ) )
            {
                $.ajax({
                    url: '{{ path('ajax_t') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var successMessage = response.nom.T;
                            $('input[id=habillage]').val(successMessage);
                            cal();
                            var successMessage  = response.nom.T;
                            var successMessageL = response.nom.L;
                            var successMessageLO = response.nom.LO;
                            console.log('libelle ::', successMessageL);
                            console.log('libelle OPT1 ::', successMessageLO);

                            /*  $('#prestation').children("option").remove();*/
                        },
                        //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');
                        }
                    }
                });
            }
            else
            {
                $('input[id=habillage]').val(0);
                cal();
            }
            //   $( "#select-rubrique" ).clone().appendTo("#test");
        });
        //vignette acceuil video
        /* $(".vignette_acc_video").change(function(event) {
         var total = 0;
         var v = $('input[name=nbr]').val();
         $(".vignette_acc_video:checked").each(function() {
         total += (parseInt($(this).val())* v )/1000;
         });
         if (total == 0) {
         $('#vignette').val(0);
         cal();
         } else {
         $('#vignette').val(total);
         cal();
         }
         });*/

        $(".vignette_acc_video").change(function(event) {
            //$(document).on('change', '.habillage', function (){
            var opt1 = '0';
            var total = 0;


            console.log("CHANGE rubrique AND prestation....................");
            var ctar = $(this).attr("value");

            console.log('ctar : ', ctar, 'opt1 :', opt1);
            var data_send = {'ctar': ctar,'opt1':opt1};
            var $input = $( this );
            if ( $input.is( ":checked" ) )
            {
                $.ajax({
                    url: '{{ path('ajax_t') }}',
                    type: 'POST',
                    data: data_send,
                    statusCode: {
                        //traitement en cas de succès
                        200: function (response) {
                            var v = $('input[name=nbr1]').val();
                            var successMessage = response.nom.T;
                            var t= $('input[id=vignette]').val(successMessage);
                            total += (parseInt($(t).val())* v )/1000;
                            if (total == 0) {
                                $('#total1').val(0);
                                cal();
                            } else {
                                $('#total1').val(total);
                                cal();
                            }

                            var successMessageL = response.nom.L;
                            var successMessageLO = response.nom.LO1;
                            console.log('libelle ::', successMessageL);
                            console.log('libelle OPT1 ::', successMessageLO);

                            /*  $('#prestation').children("option").remove();*/
                        },
                        //traitement en cas d'erreur (on peut aussi traiter le cas erreur 500...)
                        412: function (response) {
                            var errorsForm = response.responseJSON.formErrors;
                            //on affiche les erreurs...
                            alert('error');

                        }
                    }
                });
            }
            else
            {
                $('input[id=vignette]').val(0);
                $('#total1').val(0);
                cal();
            }
            //   $( "#select-rubrique" ).clone().appendTo("#test");
        });
        //vignette banniere
        $(".banniere").click(function(event) {
            var total = 0;
            var nbr = $('input[name=nombre]').val();
            $(".banniere:checked").each(function() {
                total += (parseInt($(this).val())* nbr )/1000;
            });
            if (total == 0) {
                $('#banniere').val(0);
                cal();
            } else {
                $('#banniere').val(total);
                cal();
            }
        });
        //totale estime
    });
</script>
</head>
<body>







